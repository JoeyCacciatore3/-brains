# LLM API Keys (Required)
# Get your API keys from:
# - Groq: https://console.groq.com/
# - Mistral: https://console.mistral.ai/
# - OpenRouter: https://openrouter.ai/

GROQ_API_KEY=your_groq_api_key_here
MISTRAL_API_KEY=your_mistral_api_key_here
OPENROUTER_API_KEY=your_openrouter_api_key_here

# OpenRouter Fallback Models (Optional)
# Comma-separated list or JSON array of fallback models to try if primary model is unavailable
# Example: OPENROUTER_FALLBACK_MODELS=["openai/gpt-3.5-turbo","anthropic/claude-3-haiku"]
# Or: OPENROUTER_FALLBACK_MODELS=openai/gpt-3.5-turbo,anthropic/claude-3-haiku
# Default: ["openai/gpt-4o-mini","openai/gpt-3.5-turbo","anthropic/claude-3-haiku","google/gemini-flash-1.5","meta-llama/llama-3.2-3b-instruct:free"]
OPENROUTER_FALLBACK_MODELS=

# Application Settings
NEXT_PUBLIC_APP_URL=http://localhost:3000
APP_URL=http://localhost:3000
NODE_ENV=development

# Rate Limiting (Optional - defaults shown)
RATE_LIMIT_MAX_REQUESTS=10
RATE_LIMIT_WINDOW_MS=60000

# Conversation Limits (Optional - defaults shown)
# Maximum number of AI exchanges per conversation (each exchange = 2 messages, one from each AI)
# Default: 20 exchanges (40 messages total)
MAX_TURNS=20

# Discussion Token Limit (Optional - defaults shown)
# Token limit for discussions before summarization is triggered
# Default: 4000 tokens (50% of 8K context with safety buffer)
DISCUSSION_TOKEN_LIMIT=4000

# Token Count Sync Validation (Optional - defaults shown)
# Enable token count sync validation when loading discussion context
# Validates file-database token count consistency and optionally auto-repairs small mismatches
# Default: false (disabled)
ENABLE_TOKEN_SYNC_VALIDATION=false
# Auto-repair token count mismatches if difference is < 5%
# Requires ENABLE_TOKEN_SYNC_VALIDATION=true
# Default: false (disabled)
AUTO_REPAIR_TOKEN_SYNC=false

# LLM Response Token Limit (Optional - defaults shown)
# Maximum tokens per AI response (default: 2000)
# Increased from 1000 to 2000 for more comprehensive responses (300-500 words as per prompts)
# Can be reduced to 1000-1500 if needed, but may result in more frequent truncation
# Note: This affects individual AI responses, not the total discussion length
MAX_TOKENS=2000

# Optional: Monitoring (for production)
# Sentry: https://sentry.io/
SENTRY_DSN=

# Vercel Analytics (automatically enabled on Vercel)
VERCEL_ANALYTICS_ID=

# OAuth Authentication (Optional)
# Required if using GitHub OAuth for user authentication
#
# NEXTAUTH_URL: Base URL for OAuth callbacks (required for OAuth to work)
# - Development: http://localhost:3000
# - Production: Your production domain (e.g., https://yourdomain.com)
# NextAuth will automatically use NEXT_PUBLIC_APP_URL if NEXTAUTH_URL is not set
NEXTAUTH_URL=http://localhost:3000

# NEXTAUTH_SECRET: Secret key for encrypting JWT tokens (required)
# Generate a secure secret with: openssl rand -base64 32
# In production, this MUST be set to a strong, random value
NEXTAUTH_SECRET=your_nextauth_secret_here

# GitHub OAuth Setup:
# 1. Go to https://github.com/settings/developers
# 2. Click "New OAuth App"
# 3. Set Authorization callback URL: http://localhost:3000/api/auth/callback/github (dev)
#    For production: https://yourdomain.com/api/auth/callback/github
# 4. Copy Client ID and Client Secret
GITHUB_CLIENT_ID=your_github_client_id_here
GITHUB_CLIENT_SECRET=your_github_client_secret_here

# Database Configuration (Optional - defaults shown)
# Path to SQLite database file
DATABASE_PATH=data/conversations.db

# Logging Configuration (Optional - defaults shown)
# Log level: debug, info, warn, error
LOG_LEVEL=info
NEXT_PUBLIC_LOG_LEVEL=info

# Server Configuration (Optional - defaults shown)
HOSTNAME=localhost
PORT=3000

# Socket.IO Configuration (Optional)
# Custom Socket.IO server URL (defaults to NEXT_PUBLIC_APP_URL)
NEXT_PUBLIC_SOCKET_URL=

# Redis Configuration (Optional - for distributed rate limiting)
# Use either REDIS_URL (connection string) or REDIS_HOST + REDIS_PORT
REDIS_URL=
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# File Storage Configuration (Optional - defaults shown)
# Directory for storing discussion files
DISCUSSIONS_DIR=data/discussions

# Session Configuration (Optional - defaults shown)
# Session timeout in minutes (default: 1440 = 24 hours)
SESSION_TIMEOUT_MINUTES=1440

# LLM Provider Timeouts (Optional - defaults shown)
# Timeout in milliseconds for each LLM provider
LLM_TIMEOUT_GROQ=60000
LLM_TIMEOUT_MISTRAL=90000
LLM_TIMEOUT_OPENROUTER=120000

# Backup Configuration (Optional - defaults shown)
# Enable automatic backups of discussion files
BACKUP_ENABLED=true
# Number of days to retain backups (default: 30)
BACKUP_RETENTION_DAYS=30
# Interval between backups in hours (default: 1)
BACKUP_INTERVAL_HOURS=1
# Directory for storing backups (default: data/backups)
BACKUPS_DIR=data/backups

# Security Configuration (Optional - future enhancement)
# Enable virus scanning for uploaded files (requires ClamAV or cloud service)
ENABLE_VIRUS_SCAN=false
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# Error Handling Configuration (Optional - defaults shown)
ERROR_DEDUPLICATION_WINDOW_MS=5000
ERROR_THROTTLE_WINDOW_MS=5000

# Operation-Specific Rate Limiting (Optional - defaults shown)
RATE_LIMIT_START_DIALOGUE=3
RATE_LIMIT_PROCEED_DIALOGUE=10
RATE_LIMIT_SUBMIT_ANSWERS=10
RATE_LIMIT_GENERATE_QUESTIONS=5
RATE_LIMIT_GENERATE_SUMMARY=2

# Retry Configuration (Optional - defaults shown)
RETRY_MAX_ATTEMPTS=3
RETRY_BASE_DELAY_MS=1000
RETRY_MAX_DELAY_MS=30000
RETRY_JITTER_ENABLED=true

# Metrics Configuration (Optional - defaults shown)
METRICS_ENABLED=true
METRICS_RETENTION_HOURS=24
METRICS_AGGREGATION_INTERVAL_MS=60000

# Logging Configuration (Optional - defaults shown)
LOG_SAMPLING_RATE=1.0
LOG_CORRELATION_ENABLED=true
LOG_STRUCTURED_FORMAT=json

# Performance Monitoring (Optional - defaults shown)
PERFORMANCE_SLOW_THRESHOLD_MS=5000
PERFORMANCE_TRACK_ENABLED=true

# Cost Tracking Configuration (Optional - defaults shown)
COST_TRACKING_ENABLED=true
GROQ_INPUT_COST_PER_1M=0.27
GROQ_OUTPUT_COST_PER_1M=0.27
MISTRAL_INPUT_COST_PER_1M=2.50
MISTRAL_OUTPUT_COST_PER_1M=7.50
OPENROUTER_INPUT_COST_PER_1M=1.00
OPENROUTER_OUTPUT_COST_PER_1M=3.00

# Cost Optimization (Optional - defaults shown)
COST_OPTIMIZATION_ENABLED=true
DAILY_COST_BUDGET=10.00
COST_ALERT_THRESHOLD=0.8

# Circuit Breaker Configuration (Optional - defaults shown)
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_WINDOW_MS=60000
CIRCUIT_BREAKER_COOLDOWN_MS=30000
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# Provider Health Monitoring (Optional - defaults shown)
PROVIDER_HEALTH_CHECK_INTERVAL_MS=30000
PROVIDER_MIN_SUCCESS_RATE=0.95
PROVIDER_MAX_LATENCY_MS=10000

# Graceful Degradation (Optional - defaults shown)
DEGRADATION_ENABLED=true
DEGRADATION_CPU_THRESHOLD=0.8
DEGRADATION_MEMORY_THRESHOLD=0.8
DEGRADATION_ACTIVE_REQUESTS_THRESHOLD=100

# Caching Configuration (Optional - defaults shown)
CACHE_ENABLED=true
CACHE_TTL_MS=3600000
CACHE_MAX_SIZE=1000
CACHE_RESPONSE_CACHING=false

# Alerting Configuration (Optional - defaults shown)
ALERTS_ENABLED=true
ALERT_ERROR_RATE_THRESHOLD=0.05
ALERT_DISK_SPACE_THRESHOLD=0.1
ALERT_WEBHOOK_URL=

# Memory Management (Optional - defaults shown)
MEMORY_MONITORING_ENABLED=true
MEMORY_CLEANUP_INTERVAL_MS=300000
MEMORY_PRESSURE_THRESHOLD=0.8

# Feature Flags (Optional - defaults shown)
FEATURE_METRICS_ENABLED=true
FEATURE_COST_TRACKING_ENABLED=true
FEATURE_CIRCUIT_BREAKER_ENABLED=true
FEATURE_CACHING_ENABLED=true
FEATURE_ALERTING_ENABLED=true
FEATURE_PERFORMANCE_MONITORING_ENABLED=true
